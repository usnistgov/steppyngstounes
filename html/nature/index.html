
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>steppyngstounes &#8212; steppyngstounes  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/rtd.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="INSTALLATION-proxy.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="INSTALLATION-proxy.html" title="Installation"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">steppyngstounes  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">steppyngstounes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p><strong>steppyngstounes</strong> / ˈstɛp ɪŋˌstoʊnz /</p>
<blockquote>
<div><p>1.  <em>pl. n.</em> <em>[Middle English]</em> Stones used as steps of a stairway;
also, stones in a stream used for crossing.  <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<blockquote>
<div><p><em>…while at Calais in 1474 we find 40 ‘steppyngstounes’ bought for
the stairways of the town.</em> <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
</div></blockquote>
<p>2.  <em>n.</em> <em>[chiefly Pythonic]</em> A package that provides iterators for
advancing from <cite>start</cite> to <cite>stop</cite>, subject to algorithms that depend on
user-defined <cite>value</cite> or <cite>error</cite>.</p>
</div></blockquote>
<p><a class="reference external" href="https://github.com/usnistgov/steppyngstounes/actions/workflows/testing-and-coverage.yml"><img alt="Testing" src="https://github.com/usnistgov/steppyngstounes/actions/workflows/testing-and-coverage.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/usnistgov/steppyngstounes/actions/workflows/build-docs.yml"><img alt="Documentation" src="https://github.com/usnistgov/steppyngstounes/actions/workflows/build-docs.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/usnistgov/steppyngstounes/actions/workflows/linting-and-spelling.yml"><img alt="Linting" src="https://github.com/usnistgov/steppyngstounes/actions/workflows/linting-and-spelling.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/guyer/steppyngstounes"><img alt="GitHub" src="https://img.shields.io/github/contributors/guyer/steppyngstounes.svg" /></a> <a class="reference external" href="https://www.codacy.com/gh/guyer/steppyngstounes/dashboard?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=guyer/steppyngstounes&amp;amp;utm_campaign=Badge_Grade"><img alt="Codacy" src="https://app.codacy.com/project/badge/Grade/442966c7b8a24ca4af23a31fe4ac2df8" /></a></p>
<p>Computations that evolve in time or sweep a variable often boil down to a
control loop like</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">totaltime</span><span class="p">:</span>
    <span class="n">t</span> <span class="o">+=</span> <span class="n">dt</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<p>which works well enough, until the size of the steps needs to change.  This
can be to save or plot results at some fixed points, or because the
computation becomes either harder or easier to perform.  The control loop
then starts to dominate the script, obscuring the interesting parts of the
computation, particularly as different edge cases are accounted for.</p>
<p>Packages like <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.odeint.html">odeint</a> address many of these issues, but do so through
callback functions, which effectively turn the computation of interest
inside out, again obscuring the interesting bits.  Further, because they
are often tailored for applications like solving ordinary differential
equations, applying them to other stepping problems, even <a class="reference external" href="https://www.ctcms.nist.gov/fipy">solving partial
differential equations</a>, can be rather opaque.</p>
<p>The steppyngstounes package is designed to retain the simplicity of the
original control loop, while allowing great flexibility in how steps are
taken and automating all of the aspects of increasing and decreasing the
step size.</p>
<p>A steppyngstounes control loop can be as simple as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">steppyngstounes</span> <span class="kn">import</span> <span class="n">FixedStepper</span>

<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">FixedStepper</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">totaltime</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">dt</span><span class="p">):</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

    <span class="n">_</span> <span class="o">=</span> <span class="n">step</span><span class="o">.</span><span class="n">succeeded</span><span class="p">()</span>
</pre></div>
</div>
<p>which replicates the <code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code> construct above, but further ensures
that <code class="docutils literal notranslate"><span class="pre">totaltime</span></code> is not overshot if it isn’t evenly divisible by <code class="docutils literal notranslate"><span class="pre">dt</span></code>.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The call to <a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Step.succeeded" title="steppyngstounes.stepper.Step.succeeded"><code class="xref py py-meth docutils literal notranslate"><span class="pre">succeeded()</span></code></a> informs the
<a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Stepper" title="steppyngstounes.stepper.Stepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stepper</span></code></a> to advance, otherwise it will
iterate on the same step indefinitely.</p>
</div>
<p>Rather than manually incrementing the control variable (e.g., <code class="docutils literal notranslate"><span class="pre">t</span></code>), the
values of the control variable before and after the step are available as
the <a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Step" title="steppyngstounes.stepper.Step"><code class="xref py py-class docutils literal notranslate"><span class="pre">Step</span></code></a> attributes
<code class="xref py py-attr docutils literal notranslate"><span class="pre">begin</span></code> and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">end</span></code>.  The attribute
<code class="xref py py-attr docutils literal notranslate"><span class="pre">size</span></code> is a shorthand for
<code class="docutils literal notranslate"><span class="pre">step.end</span> <span class="pre">-</span> <span class="pre">step.begin</span></code>.</p>
<p>If the size of the steps should be adjusted by some characteristic of the
calculation, such as the change in the value since the last solution, the
error (normalized to 1) can be passed to
<a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Step.succeeded" title="steppyngstounes.stepper.Step.succeeded"><code class="xref py py-meth docutils literal notranslate"><span class="pre">succeeded()</span></code></a>, causing the
<a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Stepper" title="steppyngstounes.stepper.Stepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stepper</span></code></a> to advance (possibly adjusting
the next step size) or to retry the step with a smaller step size.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">steppyngstounes</span> <span class="kn">import</span> <span class="n">SomeStepper</span>

<span class="n">old</span> <span class="o">=</span> <span class="n">initial_condition</span>
<span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">SomeStepper</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">totaltime</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">dt</span><span class="p">):</span>
    <span class="n">new</span> <span class="o">=</span> <span class="n">do_something_else</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="p">(</span><span class="n">new</span> <span class="o">-</span> <span class="n">old</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span>

    <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">succeeded</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">err</span><span class="p">):</span>
        <span class="n">old</span> <span class="o">=</span> <span class="n">new</span>
        <span class="c1"># do happy things</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># do sad things</span>
</pre></div>
</div>
<p>A hierarchy of <a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Stepper" title="steppyngstounes.stepper.Stepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stepper</span></code></a> iterations enables
saving or plotting results at fixed, possibly irregular, points, while
allowing an adaptive <a class="reference internal" href="_autosummary/steppyngstounes.stepper.html#steppyngstounes.stepper.Stepper" title="steppyngstounes.stepper.Stepper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stepper</span></code></a> to find the
most efficient path between those checkpoints.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">steppyngstounes</span> <span class="kn">import</span> <span class="n">CheckpointStepper</span><span class="p">,</span> <span class="n">SomeStepper</span>

<span class="n">old</span> <span class="o">=</span> <span class="n">initial_condition</span>
<span class="k">for</span> <span class="n">checkpoint</span> <span class="ow">in</span> <span class="n">CheckpointStepper</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
                                    <span class="n">stops</span><span class="o">=</span><span class="p">[</span><span class="mf">1e-3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1e3</span><span class="p">,</span> <span class="mf">1e6</span><span class="p">]):</span>

    <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">SomeStepper</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">checkpoint</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span>
                            <span class="n">stop</span><span class="o">=</span><span class="n">checkpoint</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
                            <span class="n">size</span><span class="o">=</span><span class="n">checkpoint</span><span class="o">.</span><span class="n">size</span><span class="p">):</span>

        <span class="n">new</span> <span class="o">=</span> <span class="n">do_something_else</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">begin</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

        <span class="n">err</span> <span class="o">=</span> <span class="p">(</span><span class="n">new</span> <span class="o">-</span> <span class="n">old</span><span class="p">)</span> <span class="o">/</span> <span class="n">scale</span>

        <span class="k">if</span> <span class="n">step</span><span class="o">.</span><span class="n">succeeded</span><span class="p">(</span><span class="n">error</span><span class="o">=</span><span class="n">err</span><span class="p">):</span>
            <span class="n">old</span> <span class="o">=</span> <span class="n">new</span>
            <span class="c1"># do happy things</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># do sad things</span>

    <span class="n">save_or_plot</span><span class="p">()</span>

    <span class="n">_</span> <span class="o">=</span> <span class="n">checkpoint</span><span class="o">.</span><span class="n">succeeded</span><span class="p">()</span>
</pre></div>
</div>
<p>A variety of stepping algorithms are described and demonstrated in the
documentation of the individual <a class="reference internal" href="_autosummary/steppyngstounes.html#module-steppyngstounes" title="steppyngstounes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">steppyngstounes</span></code></a> classes.</p>
<hr class="docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><em>Middle English Dictionary</em>,
Ed.  Robert E. Lewis, <em>et al.</em>,
Ann Arbor: University of Michigan Press, 1952-2001.
Online edition in <em>Middle English Compendium</em>,
Ed.  Frances McSparran, <em>et al.</em>,
Ann Arbor: University of Michigan Library, 2000-2018.
&lt;<a class="reference external" href="https://quod.lib.umich.edu/m/middle-english-dictionary/dictionary/MED42815">https://quod.lib.umich.edu/m/middle-english-dictionary/dictionary/MED42815</a>&gt;.
Accessed 16 December 2020.</p>
</aside>
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><em>Building in England, Down to 1540: A Documentary History</em>,
L. F. Salzman, Clarenden Press, Oxford, 1952.
&lt;<a class="reference external" href="https://books.google.com/books?id=WtZPAAAAMAAJ&amp;focus=searchwithinvolume&amp;q=steppyngstounes">https://books.google.com/books?id=WtZPAAAAMAAJ&amp;focus=searchwithinvolume&amp;q=steppyngstounes</a>&gt;.
Accessed 16 December 2020.</p>
</aside>
</aside>
<div class="toctree-wrapper compound">
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!-- Taken from https://www.filamentgroup.com/lab/html-includes/#another-demo%3A-including-another-html-file -->
<iframe src="_static/versions.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="INSTALLATION-proxy.html" title="Installation"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">steppyngstounes  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">steppyngstounes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>